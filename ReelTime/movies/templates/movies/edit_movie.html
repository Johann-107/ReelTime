{% extends 'reel_time/partials/base.html' %}
{% load static %}

{% block title %}Edit Movie - ReelTime{% endblock title %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/edit_movie.css' %}">
{% endblock extra_head %}

{% block content %}
<div class="page-content">
    <div class="container">
        <div class="edit-movie-container">
            <h2>Edit Movie: {{ detail.movie.title }}</h2>

            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}

                <fieldset>
                    <legend>General Information</legend>
                    {# Only show movie-related fields, excluding admin-related ones #}
                    {{ movie_form.title.errors }}
                    <p>{{ movie_form.title.label_tag }} {{ movie_form.title }}</p>

                    {{ movie_form.description.errors }}
                    <p>{{ movie_form.description.label_tag }} {{ movie_form.description }}</p>

                    {{ movie_form.genre.errors }}
                    <p>{{ movie_form.genre.label_tag }} {{ movie_form.genre }}</p>

                    {{ movie_form.director.errors }}
                    <p>{{ movie_form.director.label_tag }} {{ movie_form.director }}</p>

                    {{ movie_form.duration_minutes.errors }}
                    <p>{{ movie_form.duration_minutes.label_tag }} {{ movie_form.duration_minutes }}</p>

                    {{ movie_form.rating.errors }}
                    <p>{{ movie_form.rating.label_tag }} {{ movie_form.rating }}</p>
                </fieldset>

                <fieldset>
                    <legend>Admin Details</legend>
                    {{ detail_form.as_p }}
                </fieldset>

                <button type="submit" class="btn btn-success">Save Changes</button>
                <a href="{% url 'movie_list' %}" class="btn btn-secondary">Cancel</a>
            </form>
        </div>
    </div>
</div>
{% endblock content %}

{% block extra_js %}
{% endblock extra_js %}