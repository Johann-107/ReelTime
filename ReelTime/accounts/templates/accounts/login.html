{% extends 'reel_time/partials/base.html' %}
{% load static %}

{% block content %}
<div style="text-align: center; padding: 100px; font-family: Arial, sans-serif;">
    <h2>Please log in to continue</h2>
    <p>Opening login...</p>
    <div style="margin-top: 20px;">
        <div class="spinner"></div>
    </div>
</div>

<style>
    .spinner {
        border: 4px solid #f3f3f3;
        border-top: 4px solid #c73e1d;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 2s linear infinite;
        margin: 0 auto;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>

<script>
    // Store the intended destination for after login
    const nextUrl = '{{ request.GET.next }}';
    if (nextUrl) {
        sessionStorage.setItem('after_login_redirect', nextUrl);
    }
    
    // Open login modal immediately
    document.addEventListener('DOMContentLoaded', function() {
        if (typeof openLoginModal === 'function') {
            openLoginModal();
        } else {
            // If modal function isn't available yet, wait a bit and try again
            setTimeout(() => {
                if (typeof openLoginModal === 'function') {
                    openLoginModal();
                } else {
                    // Final fallback
                    window.location.href = '/?show_login=true';
                }
            }, 100);
        }
    });
</script>
{% endblock %}